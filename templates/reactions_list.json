[
    {% for reaction in reactions %}
    {
        valid:"{{ reaction.valid }}",
        reference:"{{ reaction.reference}}",
        entered_name:"{{ reaction.user.first_name }} {{ reaction.user.last_name }}",
        performed_name:"{{ reaction.performedBy.first_name }} {{ reaction.performedBy.last_name }}",
        quantities : [
        {% for quantity in reaction.compoundquantity_set.all %}
            {
              role:"{{ quantity.role.label }}",
              compound_name:"{{ quantity.compound.name }}",
              quantity_amount:"{{ quantity.amount }}"
            },
        {% endfor %}
        performedDate:"{{ reaction.performedDateTime }}",
        insertedDate:"{{ reaction.insertedDateTime }}",
        notes:"{{ reaction.notes }}",
        {% if user.is_authenticated %}
            {% if reaction.labGroup in user.labgroup_set.all %}
                editable:true,
	                {% if reaction.datasetrelation_set.exists %}
                        deletable:false,
                        invalidable:true
                    {% else %}
                        deltable:true,
                        invalidable = false
                    {% endif %}
            {% else %}
                editable:false,
                deletable:false,
                invalidable:false
            {% endif %}
        {% else %}
            editable:false,
            deletable:false,
            invalidable:false
        {% endif %}
    },
    {% endfor %}
]
